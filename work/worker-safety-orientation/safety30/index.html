<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>í•µì‹¬ 30ëŒ€ ì‚°ì—…ì•ˆì „ë³´ê±´ê·œì¹™ â€” íŠ¸ë¦¬(eBook)</title>
<link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" rel="stylesheet">
<style>
:root{
  --ink:#0f172a; --muted:#64748b; --bg:#f5f7fb; --card:#fff; --accent:#2563eb;
  --radius:16px; --shadow:0 8px 26px rgba(2,6,23,.08);
}
*{box-sizing:border-box}
body{margin:0;background:var(--bg);color:var(--ink);font-family:"Pretendard","Noto Sans KR",system-ui,sans-serif;line-height:1.65}
header{background:#fff;border-bottom:1px solid #e5e7eb;position:sticky;top:0;z-index:10}
.header-inner{max-width:980px;margin:0 auto;padding:12px 14px;display:flex;align-items:center;gap:10px}
.title{font-weight:800}
.container{max-width:980px;margin:0 auto;padding:16px 14px 60px}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:12px}
.card{background:var(--card);border:1px solid #e5e7eb;border-radius:var(--radius);box-shadow:var(--shadow);padding:14px;cursor:pointer;transition:.2s}
.card:hover{transform:translateY(-2px)}
.card h3{margin:0 0 6px 0;font-size:1.05rem}
.card .meta{color:var(--muted);font-size:.9rem}
.list{margin-top:10px;display:none}
.item{background:#f8fafc;border:1px solid #e5e7eb;border-radius:12px;padding:10px;margin:8px 0}
.item .ititle{font-weight:700;cursor:pointer}
.item .details{display:none;margin-top:8px;border-left:3px solid var(--accent);background:#eef2ff;border-radius:8px;padding:10px;white-space: pre-line;}
.small{color:var(--muted);font-size:.9rem}
footer{color:#94a3b8;text-align:center;padding:26px 0}
.search{width:100%;border:1px solid #d1d7e0;border-radius:12px;padding:12px;font-size:1rem;margin:0 0 12px 0}
</style>
</head>
<body>
<header>
  <div class="header-inner">
    <div class="title">ğŸ“˜ í•µì‹¬ 30ëŒ€ ì‚°ì—…ì•ˆì „ë³´ê±´ê·œì¹™ â€” íŠ¸ë¦¬(eBook)</div>
  </div>
</header>

<main class="container">
  <input id="q" class="search" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: ë¹„ê³„, LOTO, ëˆ„ì „ì°¨ë‹¨ê¸°, êµ´ì°©)">
  <div id="cats" class="grid">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
  <div class="small">â€» í•­ëª© ì œëª©ì„ íƒ­í•˜ë©´ ìƒì„¸ê°€ í¼ì³ì§‘ë‹ˆë‹¤. ì¹´í…Œê³ ë“œ ì¹´ë“œë¥¼ ëˆ„ë¥´ë©´ ëª©ë¡ì´ ì—´ë¦½ë‹ˆë‹¤.</div>
</main>

<footer>Â© 2025 KOEN â€” ëª¨ë°”ì¼ ìµœì í™” íŠ¸ë¦¬ eBook</footer>

<script>
const FILES = [
  "data/fall.json",
  "data/machine.json",
  "data/electric.json",
  "data/fire.json",
  "data/excavation.json",
  "data/common.json"
];

let DATA = []; // âœ… ë°˜ë“œì‹œ í•„ìš”

async function loadAll() {
  let all = [];
  for (let file of FILES) {
    const res = await fetch(file);
    const json = await res.json();
    all.push(json);
  }
  DATA = all;   // âœ… ê²€ìƒ‰ ê¸°ëŠ¥ì—ì„œ í•„ìš”
  render(all);
}

function render(arr){
  const box = document.getElementById('cats');
  box.innerHTML='';
  arr.forEach(cat => {
    const card = document.createElement('div');
    card.className='card';
    const count = (cat.items||[]).length;
    card.innerHTML = `<h3>${cat.category}</h3><div class="meta">${count}ê°œ í•­ëª©</div><div class="list"></div>`;
    const list = card.querySelector('.list');
    (cat.items||[]).forEach(it=>{
      const item = document.createElement('div');
      item.className='item';
      item.innerHTML = `<div class="ititle">${it.id}. ${it.title}</div><div class="details">${it.details}</div>`;
      const ititle = item.querySelector('.ititle');
      const details = item.querySelector('.details');
      ititle.addEventListener('click', ()=>{
        details.style.display = details.style.display==='block' ? 'none' : 'block';
      });
      list.appendChild(item);
    });
    card.addEventListener('click', (ev)=>{
      // Avoid collapsing when clicking inner items
      if(ev.target.classList.contains('ititle')) return;
      if(ev.target.classList.contains('details')) return;
      list.style.display = (list.style.display==='block') ? 'none' : 'block';
    });
    box.appendChild(card);
  });
}

document.getElementById('q').addEventListener('input', (e)=>{
  const q = e.target.value.trim();
  if(!q){ render(DATA); return; }
  const filtered = DATA.map(cat=>{
    const items = (cat.items||[]).filter(it => (it.title+it.details).toLowerCase().includes(q.toLowerCase()));
    return {...cat, items};
  }).filter(cat => cat.items.length>0);
  render(filtered);
});

loadAll();
</script>
</body>
</html>
