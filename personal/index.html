<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ë…ë¦½ ì‹¤í–‰ ìë™ íƒ€ì</title>
<style>
  body {
    font-family: Pretendard, sans-serif;
    background: #f5f7fb;
    margin: 0;
    padding: 24px;
  }
  h2 { margin-bottom: 10px; }
  textarea#text {
    width: 100%;
    height: 180px;
    padding: 12px;
    font-size: 16px;
    border-radius: 12px;
    border: 1px solid #ccc;
  }
  .btn {
    padding: 10px 16px;
    font-weight: 700;
    background: #2563eb;
    color: #fff;
    border-radius: 10px;
    border: none;
    cursor: pointer;
  }
  .btn2 {
    padding: 10px 16px;
    font-weight: 700;
    background: #e5e7eb;
    border: none;
    border-radius: 10px;
    cursor: pointer;
  }
  #status {
    margin-top: 14px;
    font-size: 14px;
    color: #555;
    font-weight: 600;
  }
</style>
</head>
<body>

<h2>ğŸ“Œ ë…ë¦½ ì‹¤í–‰ ìë™ íƒ€ì</h2>
<p>1) ì œì¶œ ì‚¬ì´íŠ¸ì—ì„œ <b>ì…ë ¥í•  ì¹¸ì„ ë§ˆìš°ìŠ¤ë¡œ ë”± í•œ ë²ˆ í´ë¦­</b>í•˜ì„¸ìš”.<br>
2) ì•„ë˜ ìƒìì— ë…í›„ê°ì„ ë¶™ì—¬ë„£ê³  "ì‹œì‘"ì„ ëˆ„ë¥´ë©´ ìë™ íƒ€ì´í•‘ë©ë‹ˆë‹¤.</p>

<textarea id="text" placeholder="ì—¬ê¸°ì— ë…í›„ê° ë‚´ìš©ì„ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”"></textarea>
<br><br>
<button class="btn" id="startBtn">ìë™ íƒ€ì´í•‘ ì‹œì‘</button>
<button class="btn2" id="stopBtn">ì •ì§€</button>

<div id="status">ìƒíƒœ: ì…ë ¥ì°½ì„ ë¨¼ì € í´ë¦­í•˜ì„¸ìš”.</div>

<script>
let target = null;        // íƒ€ì´í•‘ ëŒ€ìƒ
let typing = false;       // íƒ€ì´í•‘ ì¤‘ ì—¬ë¶€
let index = 0;            // í˜„ì¬ ì¸ë±ìŠ¤
let timer = null;

// === (1) ì‚¬ìš©ìê°€ ìµœì¢… ì…ë ¥ì°½ í´ë¦­í•˜ë©´ íƒ€ê²Ÿìœ¼ë¡œ ê³ ì • ===
document.addEventListener('mousedown', function(e) {
  if (e.target.tagName === "TEXTAREA" || e.target.tagName === "INPUT" || e.target.isContentEditable) {
    target = e.target;
    document.getElementById("status").innerText =
      "ìƒíƒœ: ì…ë ¥ì°½ íƒ€ê²Ÿ ê³ ì •ë¨ (ì—¬ê¸°ì— íƒ€ì´í•‘ë¨)";
  }
});

// === (2) í•œ ê¸€ìì”© íƒ€ì´í•‘ ===
function typeCharacter() {
  if (!typing) return;

  const text = document.getElementById("text").value;
  if (index >= text.length) {
    typing = false;
    document.getElementById("status").innerText = "ìƒíƒœ: ì…ë ¥ ì™„ë£Œ âœ…";
    return;
  }

  const ch = text[index++];

  if (target.isContentEditable) {
    document.execCommand("insertText", false, ch);
  } else {
    let start = target.selectionStart;
    let end = target.selectionEnd;
    let val = target.value;
    target.value = val.slice(0, start) + ch + val.slice(end);
    target.setSelectionRange(start + 1, start + 1);
  }

  target.dispatchEvent(new Event("input", { bubbles: true }));

  timer = setTimeout(typeCharacter, 40); // ì†ë„ ì¡°ì ˆ(40ms)
}

// === (3) ì‹œì‘ ë²„íŠ¼ ===
document.getElementById("startBtn").addEventListener("click", () => {
  if (!target) {
    alert("ë¨¼ì € ì œì¶œ í˜ì´ì§€ì—ì„œ ì…ë ¥ì°½ì„ í´ë¦­í•´ì•¼ í•©ë‹ˆë‹¤!");
    return;
  }
  index = 0;
  typing = true;
  document.getElementById("status").innerText = "ìƒíƒœ: ìë™ ì…ë ¥ ì¤‘...";
  typeCharacter();
});

// === (4) ì •ì§€ ë²„íŠ¼ ===
document.getElementById("stopBtn").addEventListener("click", () => {
  typing = false;
  clearTimeout(timer);
  document.getElementById("status").innerText = "ìƒíƒœ: ì •ì§€ë¨";
});
</script>
</body>
</html>
