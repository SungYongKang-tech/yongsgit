<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ê¸°ì‚¬ì˜ ì—¬í–‰</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: sans-serif;
      background-color: #f9f9f9;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      padding: 20px;
    }
    h1 {
      font-size: 24px;
      margin-bottom: 20px;
    }
    .level-buttons {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin-bottom: 20px;
    }
    .level-buttons button {
      font-size: 16px;
      padding: 10px 15px;
      border: none;
      background-color: #007bff;
      color: white;
      border-radius: 6px;
      cursor: pointer;
    }
    .level-buttons button:hover {
      background-color: #0056b3;
    }

    #board-container {
      display: flex;
      justify-content: center;
      align-items: center;
      width: 100%;
      max-width: 90vmin;
      aspect-ratio: 1 / 1;
    }

    .board {
      display: grid;
      width: 100%;
      height: 100%;
      gap: 2px;
      touch-action: manipulation;
    }

    .cell {
      background: white;
      border: 1px solid #ccc;
      display: flex;
      justify-content: center;
      align-items: center;
      user-select: none;
    }
    .valid-move {
      background: #d1eaff;
    }
    .visited {
      background: #aeeaa4;
    }

    #message {
      margin-top: 20px;
      font-size: 18px;
      color: #333;
      text-align: center;
    }
  </style>
</head>
<body>

  <h1>ğŸ§© ê¸°ì‚¬ì˜ ì—¬í–‰</h1>

  <div class="level-buttons">
    <button onclick="startGame(4)">4x4</button>
    <button onclick="startGame(5)">5x5</button>
    <button onclick="startGame(6)">6x6</button>
    <button onclick="startGame(7)">7x7</button>
  </div>

  <div id="board-container">
    <div id="board" class="board"></div>
  </div>

  <div id="message"></div>

  <script>
    let boardSize = 0;
    let board = [];
    let moveCount = 1;
    let knightPos = null;

    const knightMoves = [
      [-2, -1], [-2, 1],
      [-1, -2], [-1, 2],
      [1, -2], [1, 2],
      [2, -1], [2, 1]
    ];

    function startGame(size) {
      boardSize = size;
      board = Array.from({ length: size }, () => Array(size).fill(0));
      moveCount = 1;
      knightPos = null;
      document.getElementById('message').textContent = '';
      renderBoard();
    }

    function renderBoard() {
      const boardDiv = document.getElementById('board');
      boardDiv.innerHTML = '';
      boardDiv.style.gridTemplateColumns = `repeat(${boardSize}, 1fr)`;
      boardDiv.style.gridTemplateRows = `repeat(${boardSize}, 1fr)`;

      // ì¹¸ ìˆ˜ì— ë”°ë¼ ìë™ ì¡°ì ˆë˜ëŠ” í°íŠ¸ í¬ê¸° ê³„ì‚° (vmin ë‹¨ìœ„)
      const fontSize = (30 / boardSize).toFixed(2) + 'vmin';

      for (let y = 0; y < boardSize; y++) {
        for (let x = 0; x < boardSize; x++) {
          const cell = document.createElement('div');
          cell.className = 'cell';
          cell.style.fontSize = fontSize;

          const value = board[y][x];
          if (value > 0) {
            cell.classList.add('visited');
            cell.textContent = value;
          } else if (knightPos && isValidMove(knightPos.x, knightPos.y, x, y)) {
            cell.classList.add('valid-move');
          }

          cell.addEventListener('click', () => onCellClick(x, y));
          boardDiv.appendChild(cell);
        }
      }
    }

    function onCellClick(x, y) {
      if (board[y][x] > 0) return;

      if (moveCount === 1 || isValidMove(knightPos.x, knightPos.y, x, y)) {
        board[y][x] = moveCount++;
        knightPos = { x, y };
        renderBoard();

        if (isBoardFull()) {
          const level = getLevel(boardSize);
          document.getElementById('message').textContent = `ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤! ${level} ë ˆë²¨ í´ë¦¬ì–´!`;
        }
      }
    }

    function isValidMove(cx, cy, nx, ny) {
      return knightMoves.some(([dx, dy]) => cx + dx === nx && cy + dy === ny);
    }

    function isBoardFull() {
      return board.every(row => row.every(cell => cell > 0));
    }

    function getLevel(size) {
      switch(size) {
        case 4: return 'í•˜ìˆ˜';
        case 5: return 'ì¤‘ìˆ˜';
        case 6: return 'ê³ ìˆ˜';
        case 7: return 'ìµœê³ ìˆ˜';
        default: return '';
      }
    }
  </script>
  <footer style="margin-top: 30px; padding: 15px; max-width: 90%; font-size: 14px; color: #555; text-align: center; line-height: 1.5;">
    <strong>ê²Œì„ ì„¤ëª…:</strong><br>
    ì²´ìŠ¤ì˜ ê¸°ì‚¬(Knight)ì²˜ëŸ¼ Lì í˜•íƒœë¡œ ì›€ì§ì´ë©° ëª¨ë“  ì¹¸ì„ ë‹¨ í•œ ë²ˆì”© ë°©ë¬¸í•´ ë³´ì„¸ìš”.<br>
    ì²˜ìŒ ìœ„ì¹˜ë¥¼ ì„ íƒí•˜ê³ , ë‹¤ìŒ ê°€ëŠ¥í•œ ì¹¸ì€ íŒŒë€ìƒ‰ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤.<br>
    ëª¨ë“  ì¹¸ì„ ìˆ«ìë¡œ ì±„ìš°ë©´ ë ˆë²¨ì„ í´ë¦¬ì–´í•˜ê²Œ ë©ë‹ˆë‹¤!<br>
    <em>(4x4: í•˜ìˆ˜ / 5x5: ì¤‘ìˆ˜ / 6x6: ê³ ìˆ˜ / 7x7: ìµœê³ ìˆ˜)</em>
  </footer>

</body>
</html>
