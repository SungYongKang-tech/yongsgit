<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML 장기 게임</title>
    <style>
        body {
            font-family: sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            background-color: #f0e6d2;
        }
        h1 {
            color: #333;
        }
        #janggi-board {
            display: grid;
            grid-template-columns: repeat(9, 60px);
            grid-template-rows: repeat(10, 60px);
            border: 2px solid #3a2a1a;
            background-color: #e4c59a;
            position: relative;
        }
        .cell {
            box-sizing: border-box;
            border: 1px solid #a0856c;
            position: relative;
        }
        .piece {
            width: 100%;
            height: 100%;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            cursor: pointer;
            transition: transform 0.2s ease;
        }
        .piece:hover {
            transform: scale(1.1);
        }
        /* 궁성 라인 */
        .palace-line {
            position: absolute;
            background-color: #3a2a1a;
            z-index: -1;
        }
        /* 세로선 */
        .col-3-row-0 { top: 30px; left: 210px; width: 1px; height: 120px; }
        .col-5-row-0 { top: 30px; left: 330px; width: 1px; height: 120px; }
        .col-3-row-7 { top: 450px; left: 210px; width: 1px; height: 120px; }
        .col-5-row-7 { top: 450px; left: 330px; width: 1px; height: 120px; }
        /* 가로선 */
        .col-3-row-0-diag1 { top: 90px; left: 210px; width: 120px; height: 1px; transform: rotate(45deg); transform-origin: top left; }
        .col-3-row-0-diag2 { top: 90px; left: 330px; width: 120px; height: 1px; transform: rotate(-45deg); transform-origin: top right; }
        .col-3-row-7-diag1 { top: 510px; left: 210px; width: 120px; height: 1px; transform: rotate(45deg); transform-origin: top left; }
        .col-3-row-7-diag2 { top: 510px; left: 330px; width: 120px; height: 1px; transform: rotate(-45deg); transform-origin: top right; }

    </style>
</head>
<body>

    <h1>HTML 장기 게임</h1>
    <div id="janggi-board">
        <div class="palace-line col-3-row-0"></div>
        <div class="palace-line col-5-row-0"></div>
        <div class="palace-line col-3-row-7"></div>
        <div class="palace-line col-5-row-7"></div>
        <div class="palace-line col-3-row-0-diag1"></div>
        <div class="palace-line col-3-row-0-diag2"></div>
        <div class="palace-line col-3-row-7-diag1"></div>
        <div class="palace-line col-3-row-7-diag2"></div>
    </div>

    <script>
        const boardElement = document.getElementById('janggi-board');

        // 초기 기물 배치
        const initialSetup = {
            // 한나라 (하단)
            '9,0': { team: 'han', piece: 'cha' },
            '9,1': { team: 'han', piece: 'ma' },
            '9,2': { team: 'han', piece: 'sang' },
            '9,3': { team: 'han', piece: 'sa' },
            '9,5': { team: 'han', piece: 'sa' },
            '9,6': { team: 'han', piece: 'sang' },
            '9,7': { team: 'han', piece: 'ma' },
            '9,8': { team: 'han', piece: 'cha' },
            '8,4': { team: 'han', piece: 'jang' },
            '7,1': { team: 'han', piece: 'po' },
            '7,7': { team: 'han', piece: 'po' },
            '6,0': { team: 'han', piece: 'byung' },
            '6,2': { team: 'han', piece: 'byung' },
            '6,4': { team: 'han', piece: 'byung' },
            '6,6': { team: 'han', piece: 'byung' },
            '6,8': { team: 'han', piece: 'byung' },

            // 초나라 (상단)
            '0,0': { team: 'cho', piece: 'cha' },
            '0,1': { team: 'cho', piece: 'ma' },
            '0,2': { team: 'cho', piece: 'sang' },
            '0,3': { team: 'cho', piece: 'sa' },
            '0,5': { team: 'cho', piece: 'sa' },
            '0,6': { team: 'cho', piece: 'sang' },
            '0,7': { team: 'cho', piece: 'ma' },
            '0,8': { team: 'cho', piece: 'cha' },
            '1,4': { team: 'cho', piece: 'jang' },
            '2,1': { team: 'cho', piece: 'po' },
            '2,7': { team: 'cho', piece: 'po' },
            '3,0': { team: 'cho', piece: 'jol' },
            '3,2': { team: 'cho', piece: 'jol' },
            '3,4': { team: 'cho', piece: 'jol' },
            '3,6': { team: 'cho', piece: 'jol' },
            '3,8': { team: 'cho', piece: 'jol' },
        };

        // 장기판 및 기물 생성
        function createBoard() {
            for (let row = 0; row < 10; row++) {
                for (let col = 0; col < 9; col++) {
                    const cell = document.createElement('div');
                    cell.classList.add('cell');
                    cell.dataset.row = row;
                    cell.dataset.col = col;

                    const pos = `${row},${col}`;
                    if (initialSetup[pos]) {
                        const pieceInfo = initialSetup[pos];
                        const pieceElement = document.createElement('div');
                        pieceElement.classList.add('piece');
                        const pieceName = pieceInfo.team === 'han' && pieceInfo.piece === 'byung' ? 'byung' :
                                          pieceInfo.team === 'cho' && pieceInfo.piece === 'jol' ? 'jol' : pieceInfo.piece;
                        pieceElement.style.backgroundImage = `url('${pieceInfo.team}_${pieceName}.svg')`;
                        pieceElement.dataset.team = pieceInfo.team;
                        pieceElement.dataset.piece = pieceInfo.piece;
                        cell.appendChild(pieceElement);
                    }

                    boardElement.appendChild(cell);
                }
            }
        }

        createBoard();

        // 게임 로직 (간단한 드래그 앤 드롭 예시)
        let selectedPiece = null;

        boardElement.addEventListener('click', (e) => {
            const target = e.target;

            // 기물 선택
            if (target.classList.contains('piece') && !selectedPiece) {
                selectedPiece = target;
                target.style.border = '2px solid red';
            }
            // 기물 이동 또는 선택 해제
            else if (selectedPiece) {
                const targetCell = target.closest('.cell');
                if (targetCell) {
                    // 같은 칸 클릭 시 선택 해제
                    if (selectedPiece.parentElement === targetCell) {
                         selectedPiece.style.border = 'none';
                         selectedPiece = null;
                         return;
                    }
                    // 빈 칸으로 이동
                    if (!targetCell.hasChildNodes()) {
                        targetCell.appendChild(selectedPiece);
                    }
                    // 다른 기물 잡기
                    else if (targetCell.firstChild !== selectedPiece) {
                        const opponentPiece = targetCell.firstChild;
                        if (opponentPiece.dataset.team !== selectedPiece.dataset.team) {
                             targetCell.removeChild(opponentPiece);
                             targetCell.appendChild(selectedPiece);
                        }
                    }
                }
                selectedPiece.style.border = 'none';
                selectedPiece = null;
            }
        });

    </script>
</body>
</html>