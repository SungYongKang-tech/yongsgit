<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>자동 전진 + 스와이프 방향 전환</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
    }
    canvas {
      display: block;
      background-color: #f0f0f0;
    }
  </style>
</head>
<body>
  <canvas id="gameCanvas" width="400" height="400"></canvas>

  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    let x = 50;
    let y = 200;
    const size = 30;
    const speed = 2;

    // 방향: "right", "up", "down"
    let direction = "right";

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.fillStyle = "blue";
      ctx.fillRect(x, y, size, size);
    }

    function move() {
      if (direction === "right") x += speed;
      if (direction === "up") y -= speed;
      if (direction === "down") y += speed;

      // 화면 밖으로 나가면 반대편에서 등장 (선택사항)
      if (x > canvas.width) x = -size;
      if (y < -size) y = canvas.height;
      if (y > canvas.height) y = -size;
    }

    function gameLoop() {
      move();
      draw();
      requestAnimationFrame(gameLoop);
    }

    gameLoop(); // 시작

    // 모바일 스와이프 처리
    let startY = null;

    canvas.addEventListener("touchstart", (e) => {
      startY = e.touches[0].clientY;
    });

    canvas.addEventListener("touchend", (e) => {
      const endY = e.changedTouches[0].clientY;
      const deltaY = endY - startY;

      if (Math.abs(deltaY) > 30) {
        if (deltaY < 0) direction = "up";
        else direction = "down";
      }
    });

    // PC에서 방향키도 지원
    document.addEventListener("keydown", (e) => {
      if (e.key === "ArrowUp") direction = "up";
      if (e.key === "ArrowDown") direction = "down";
      if (e.key === "ArrowRight") direction = "right";
    });
  </script>
</body>
</html>
