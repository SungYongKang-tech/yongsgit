<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Makeup Lesson Manager</title>
<style>
body{
  font-family:-apple-system, BlinkMacSystemFont, "Pretendard",sans-serif;
  background:#f5f5f7; margin:0;
}

/* 헤더 */
header{
  background:#fff; padding:16px;
  font-size:1.3rem; font-weight:700;
  border-bottom:1px solid #ddd;
}

/* 시간표 */
.table{
  padding:16px;
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:10px;
}
.cell{
  background:#fff;
  padding:14px;
  border-radius:12px;
  box-shadow:0 4px 14px rgba(0,0,0,0.08);
  cursor:pointer;
  font-size:0.9rem;
}
.cell strong{font-size:1rem;}

.sheet{
  position:fixed; left:0; right:0; bottom:-100%;
  background:#fff; border-radius:20px 20px 0 0;
  padding:20px; box-shadow:0 -6px 20px rgba(0,0,0,0.2);
  transition:0.35s; max-height:70%; overflow:auto;
}
.sheet.open{ bottom:0; }

input{
  width:100%; padding:10px; border:1px solid #ccc;
  border-radius:8px; margin-top:10px; font-size:1rem;
}
.btn{
  padding:10px; margin-top:14px; border-radius:10px;
  background:#2563eb; color:#fff; text-align:center;
  font-weight:700; cursor:pointer;
}

/* 보강 리스트 */
.list{ padding:16px; }
.item{
  background:#fff; padding:14px 16px; margin-bottom:12px;
  border-radius:12px; border-left:6px solid #2563eb;
}
.name{font-weight:700; font-size:1.1rem;}
.sub{color:#666; font-size:0.85rem;}
.reason{margin-top:4px;}
</style>
</head>

<body>

<header>레슨 시간표</header>

<!-- 시간표 -->
<div class="table" id="lessonTable"></div>

<!-- 보강 생성 바텀시트 -->
<div class="sheet" id="sheet">
  <h3 id="sheetTitle"></h3>
  <input type="date" id="dateInput">
  <input id="reasonInput" placeholder="보강 사유 입력">
  <div class="btn" onclick="createMakeup()">보강자 생성</div>
</div>

<header>보강 대상자</header>
<div class="list" id="makeupList"></div>

<script>
// --------------------------------------
// 1. 기존 레슨 시간표 데이터
// --------------------------------------
const lessonData = {
  mon_0:"정승목", mon_1:"이상준", mon_2:"이낭주", mon_3:"조보미",
  tue_0:"이세란", tue_1:"박나령", tue_2:"김승일", tue_3:"송은아",
  wed_0:"정승목", wed_1:"이상준", wed_2:"이낭주", wed_3:"조보미",
  thu_0:"이세란", thu_1:"박나령", thu_2:"김승일", thu_3:"송은아"
};

const dayKor = {mon:"월요일", tue:"화요일", wed:"수요일", thu:"목요일"};

// --------------------------------------
// 2. 시간표 렌더링
// --------------------------------------
function renderLessonTable(){
  const box = document.getElementById("lessonTable");
  box.innerHTML="";

  Object.keys(lessonData).forEach(key=>{
    const [day, group] = key.split("_");
    const name = lessonData[key];

    const div = document.createElement("div");
    div.className="cell";
    div.innerHTML = `
      <strong>${name}</strong><br>
      ${dayKor[day]} / 그룹 ${group}
    `;
    div.onclick=()=>openSheet(name, dayKor[day], group);
    box.appendChild(div);
  });
}

// --------------------------------------
// 3. 보강 생성 바텀시트 열기
// --------------------------------------
let selectedPerson = null;
let selectedOrigin = null;

function openSheet(name, day, group){
  selectedPerson = name;
  selectedOrigin = `${day} 그룹 ${group}`;

  document.getElementById("sheetTitle").innerText =
    `보강 생성: ${name} (${selectedOrigin})`;

  document.getElementById("sheet").classList.add("open");
}

// --------------------------------------
// 4. 보강 대상자 생성
// --------------------------------------
let makeupList = [];

function createMakeup(){
  const date = document.getElementById("dateInput").value.trim();
  const reason = document.getElementById("reasonInput").value.trim();

  if(date==="" || reason===""){
    alert("날짜와 사유를 입력해주세요.");
    return;
  }

  makeupList.push({
    name:selectedPerson,
    origin:selectedOrigin,
    date,
    reason,
    status:"pending"
  });

  // reset
  document.getElementById("sheet").classList.remove("open");
  document.getElementById("dateInput").value="";
  document.getElementById("reasonInput").value="";

  renderMakeupList();
}

// --------------------------------------
// 5. 보강 대상자 렌더링
// --------------------------------------
function renderMakeupList(){
  const box = document.getElementById("makeupList");
  box.innerHTML="";

  if(makeupList.length===0){
    box.innerHTML='<div style="color:#999;">보강 대상자가 없습니다.</div>';
    return;
  }

  makeupList.forEach(m=>{
    const div = document.createElement("div");
    div.className="item";
    div.innerHTML = `
      <div class="name">${m.name}</div>
      <div class="sub">${m.origin}</div>
      <div class="reason">사유: ${m.reason}</div>
      <div class="sub">보강 예정일: ${m.date}</div>
    `;
    box.appendChild(div);
  });
}

// --------------------------------------
renderLessonTable();
renderMakeupList();
</script>

</body>
</html>
