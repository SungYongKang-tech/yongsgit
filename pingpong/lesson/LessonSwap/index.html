<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>LessonSwap · 레슨 시간표</title>
  <style>
    :root{
      --ink:#1f2937; --muted:#6b7280; --acc:#0d47a1; --bg:#f5f7fb; --card:#fff;
    }
    *{box-sizing:border-box}
    body{
      margin:0; background:var(--bg); color:var(--ink);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans KR",sans-serif;
      min-height:100dvh; display:flex; flex-direction:column; align-items:center;
      padding:16px;
    }
    h1{margin:8px 0 12px; font-size:clamp(18px,4vw,26px); color:var(--acc)}
    .panel{
      width:min(980px,96vw); background:var(--card); border:1px solid #e5e7eb; border-radius:14px;
      box-shadow:0 8px 30px rgba(0,0,0,.05); padding:14px;
    }
    .controls{
      display:flex; flex-wrap:wrap; gap:8px; align-items:center; margin-bottom:10px;
    }
    .btn{
      appearance:none; border:1px solid #d1d5db; background:#fff; color:#111827;
      padding:10px 12px; border-radius:10px; font-weight:700; cursor:pointer;
    }
    .btn:disabled{opacity:.5; cursor:not-allowed}
    .btn-primary{ background:#1e88e5; color:#fff; border-color:#1e88e5 }
    .btn-warn{ background:#ff7043; color:#fff; border-color:#ff7043 }
    .btn-reset{ background:#e0e7ff; color:#1e3a8a; border-color:#c7d2fe }
    #scheduleContainer{ width:100%; }
    table{ width:100%; border-collapse:collapse; table-layout:fixed; }
    th, td{ border:1px solid #e5e7eb; padding:10px; text-align:center; }
    th{ background:#ffe8d6; font-weight:800 }
    td{ background:#fff; word-break:break-word; font-size:clamp(14px,4vw,18px) }
    td.empty{ background:#f5f5f5; color:#9aa0a6 }
    td.modified{ outline:2px solid #f59e0b; outline-offset:-2px }
    td.selected{ box-shadow:inset 0 0 0 3px #1e88e5 }
    .hint{ color:var(--muted); font-size:15px; margin:8px 2px 0 }
  </style>
</head>
<body>
  <h1>남동발전 탁구 레슨 시간표</h1>

  <div class="panel">
    <div class="controls">
      <button id="importBtn" class="btn btn-primary" onclick="window.importSchedule()">초기화</button>
      <button id="swapBtn" class="btn" disabled onclick="window.handleSwap()">↔️ 서로변경</button>
      <button id="absentBtn" class="btn btn-warn" onclick="window.markAbsent()">불참</button>
      <!-- 되돌리기 버튼은 ensureUndoButton()이 DOM에 안전하게 붙입니다 -->
    </div>

    <div id="scheduleContainer"></div>
    <div class="hint">
      • 셀 1개 선택 후 빈 셀을 클릭하면 “복사”됩니다.<br> • 셀 2개를 선택하면 “서로 변경” 버튼이 활성화됩니다.<br> • 불참은 셀 1개만 선택해야 합니다.
    </div>
  </div>

  <!-- Firebase 모듈 스크립트 -->
  <script type="module" src="./firebase.js"></script>
  <script type="module" src="./script.js"></script>
</body>
</html>
