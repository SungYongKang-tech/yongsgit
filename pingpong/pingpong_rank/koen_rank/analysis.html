<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>íƒêµ¬ ìŠ¤íƒ€ì¼ ë¶„ì„</title>

<style>
body {
  margin:0;
  padding:16px;
  font-family:"Pretendard","Noto Sans KR",sans-serif;
  background:#ffffff;
  color:#0f172a;
  font-weight:600;
  line-height:1.6;
}
h2 {
  margin:0 0 10px;
  font-size:20px;
  font-weight:900;
  color:#1e3a8a;
}
.block {
  margin-bottom:20px;
  padding:14px 16px;
  background:#f5f7fb;
  border-radius:12px;
  border:1px solid #e5e7eb;
}
.tag {
  font-size:13px;
  background:#e2efff;
  padding:3px 8px;
  border-radius:999px;
  font-weight:800;
  color:#1e40af;
  margin-right:6px;
}
.hr {
  height:1px;
  background:#e2e8f0;
  margin:14px 0;
}
</style>

</head>
<body>

<div id="analysisContainer">
  <!-- JSë¡œ ë‚´ìš© ì±„ì›€ -->
</div>

<script>
// âœ… player.htmlì—ì„œ ë³´ë‚´ì¤€ name íŒŒë¼ë¯¸í„° ì½ê¸°
const params = new URLSearchParams(location.search);
const playerName = params.get("name") || "ì„ ìˆ˜";

// âœ… player.htmlì—ì„œ ì „ë‹¬ë  ìˆ˜ ìˆëŠ” ë°ì´í„° êµ¬ì¡° ì‹œë®¬ë ˆì´ì…˜
// (player.htmlì—ì„œ ëª¨ë‹¬ ë¡œë”© ì§ì „ì— replace í•´ë„ ê°€ëŠ¥)
// ì‹¤ì œ êµ¬í˜„ ì‹œ player.htmlì—ì„œ ì•„ë˜ ë°ì´í„°ë“¤ì„ í•¨ê»˜ ë„˜ê²¨ì£¼ë©´ ì •í™•ë„â†‘

/*
playerStyleData = {
  singleWinRate: 62,
  doubleWinRate: 55,
  bestPartner: "ê¹€ìŠ¹ì¼",
  worstPartner: "í™ê¸¸ë™",
  mostWinOpponent: "ì´ìƒì¤€",
  mostLoseOpponent: "ì •ìš©ë¹ˆ",
  tendencies: {
     attack: true,
     control: false,
     backhandWeak: true,
     pivotGood: true,
  }
}
*/

// âœ… í˜„ì¬ ë²„ì „ì€ player.htmlì—ì„œ ìƒì„±í•œ ê°’ì„ windowì— ë‹´ì•„ì„œ ëª¨ë‹¬ì— ì „ë‹¬í•˜ëŠ” ë°©ì‹ (ì¶”ì²œ êµ¬ì¡°)
let data = window.playerAnalysisData || {
  // âš ï¸ í¬ë§·ì€ ë°˜ë“œì‹œ ì•„ë˜ êµ¬ì¡°
  singleWinRate: 0,
  doubleWinRate: 0,
  bestPartner: null,
  worstPartner: null,
  mostWinOpponent: null,
  mostLoseOpponent: null,
  tendencies: {}, // ê´€ë¦¬ìê°€ ì…ë ¥í•œ íŠ¹ì„±
};

// âœ… ìŠ¤íƒ€ì¼ ë¶„ì„ ê³µì‹
function analyzeStyle() {
  let S = data.singleWinRate;
  let D = data.doubleWinRate;
  let tendencies = data.tendencies || {};

  // -----------------------------
  // âœ… 1. ê¸°ë³¸ í”Œë ˆì´ ìŠ¤íƒ€ì¼ ì¶”ì •
  // -----------------------------
  let style = "";
  if (S >= 60 && D >= 60) {
    style = "ê· í˜• ì¡íŒ ì˜¬ë¼ìš´ë“œí˜• í”Œë ˆì´ì–´";
  } else if (S >= 65 && D < 50) {
    style = "ë‹¨ì‹ì— íŠ¹íˆ ê°•í•œ ê³µê²©í˜• í”Œë ˆì´ì–´";
  } else if (S < 50 && D >= 60) {
    style = "ë³µì‹ ê°ê°ì´ ìš°ìˆ˜í•œ í˜‘ë ¥í˜• í”Œë ˆì´ì–´";
  } else if (S < 50 && D < 50) {
    style = "ì „ì²´ì ìœ¼ë¡œ ì•ˆì •ê° í–¥ìƒì´ í•„ìš”í•œ ì„±ì‹¤í˜• í”Œë ˆì´ì–´";
  } else {
    style = "ì „í˜•ì ì¸ ë™í˜¸íšŒí˜• ì˜¬ë¼ìš´ë“œ ìŠ¤íƒ€ì¼";
  }

  // -----------------------------
  // âœ… 2. ê´€ë¦¬ì íŠ¹ì„± ê¸°ë°˜ ì¶”ê°€ ë ˆì´ì–´
  // -----------------------------
  let extra = [];

  if (tendencies.attack) extra.push("ì´ˆêµ¬ ê³µê²© ì„±í–¥ì´ ê°•í•¨");
  if (tendencies.control) extra.push("ë³¼ ì»¨íŠ¸ë¡¤ ì¤‘ì‹¬ ìš´ì˜");
  if (tendencies.backhandWeak) extra.push("ë°±í•¸ë“œ ì•ˆì •ì„±ì´ ë¶€ì¡±í•¨");
  if (tendencies.pivotGood) extra.push("í¬í•¸ë“œ pivot(ëŒë ¤ì¹˜ê¸°)ì´ ê°•ì ");

  let tendencyText = extra.length ? extra.join(" Â· ") : "ë“±ë¡ëœ íŠ¹ì„±ì´ ì—†ìŠµë‹ˆë‹¤.";

  // -----------------------------
  // âœ… 3. ì•½ì  ë¶„ì„
  // -----------------------------
  let weakness = "";

  if (S < 50) weakness += "ë‹¨ì‹ ë ë¦¬ ì¤‘ ì•ˆì •ì„±ì´ ë–¨ì–´ì§€ëŠ” ê²½í–¥ì´ ìˆìŒ. ";
  if (D < 50) weakness += "ë³µì‹ì—ì„œ í¬ì§€ì…˜ ì´í•´ ë˜ëŠ” ì»¤ë²„ ë²”ìœ„ê°€ ë¶€ì¡±í•´ ë³´ì„. ";
  if (tendencies.backhandWeak) weakness += "ë°±í•¸ë“œ ë¦¬ì‹œë¸ŒÂ·ìˆ˜ë¹„ ë²”ìœ„ê°€ ì•½ì ìœ¼ë¡œ ë³´ì„. ";

  if (!weakness) weakness = "í° ì•½ì ë³´ë‹¤ëŠ” ì„¸ë¶€ì¡°ì •ì´ í•„ìš”í•œ íƒ€ì…ì…ë‹ˆë‹¤.";

  // -----------------------------
  // âœ… 4. í›ˆë ¨ ë°©í–¥ ì¶”ì²œ
  // -----------------------------
  let training = "";

  if (tendencies.backhandWeak)
    training += "â€¢ ë°±ë“œë¼ì´ë¸Œ & ì»¤íŠ¸ë³¼ ì•ˆì •í™” í›ˆë ¨ í•„ìˆ˜\n";

  if (S < 55)
    training += "â€¢ ë‹¨ì‹: ì´ˆêµ¬ ì‹¤ìˆ˜ ì¤„ì´ê¸°, ì˜¤í”ˆ í›„ ì—°ê²° ì—°ìŠµ ê°•í™”\n";

  if (D < 55)
    training += "â€¢ ë³µì‹: íŒŒíŠ¸ë„ˆì™€ì˜ í¬ì§€ì…˜ ì•½ì†(ì „Â·í›„ì§„/ì‚¬ì´ë“œ)ì„ ëª…í™•íˆ ì„¤ì •\n";

  training += "â€¢ í¬ì–´Â·ë°± ì „í™˜ ìŠ¤í…ì„ í†µí•´ ì „ì²´ ë°˜ì‘ì†ë„ ê°œì„ \n";
  training += "â€¢ ìì‹  ìˆëŠ” êµ¬ì§ˆ(ë“œë¼ì´ë¸Œ/ë¸”ë¡/ì»¤íŠ¸)ì— ëŒ€í•œ í™•ì‹ ì„ ë†’ì—¬ ê³µê²© ê²°ì •ë ¥ ê°•í™”";

  // -----------------------------
  // âœ… 5. ìƒëŒ€ ì„±í–¥ ë°ì´í„° ê¸°ë°˜ ì¡°ì–¸
  // -----------------------------
  let opponentTip = "";

  if (data.mostLoseOpponent) {
    opponentTip = `
    ìµœê·¼ ê°€ì¥ ì–´ë ¤ì›€ì„ ê²ªëŠ” ìƒëŒ€ëŠ” <b>${data.mostLoseOpponent}</b>ì…ë‹ˆë‹¤.<br>
    ì´ ì„ ìˆ˜ì™€ì˜ ê²½ê¸° íŒ¨í„´ì„ ë¶„ì„í•˜ì—¬ ë ˆì‹œë¸Œ ì„ íƒ, ì´ˆêµ¬ ë°©í–¥ ì„ íƒì„ ì¡°ê¸ˆ ì¡°ì •í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.
    `;
  }

  // -----------------------------
  // âœ… ì¶œë ¥ HTML ìƒì„±
  // -----------------------------
  return `
    <h2>ğŸ” ${playerName} ì„ ìˆ˜ ìŠ¤íƒ€ì¼ ë¶„ì„</h2>

    <div class="block">
      <span class="tag">ì¢…í•© ìŠ¤íƒ€ì¼</span>
      <div><b>${style}</b></div>
    </div>

    <div class="block">
      <span class="tag">ë“±ë¡ëœ ì„ ìˆ˜ íŠ¹ì„±</span>
      <div>${tendencyText}</div>
    </div>

    <div class="block">
      <span class="tag">ë‹¨ì‹/ë³µì‹ ìŠ¹ë¥  ê¸°ë°˜ í•´ì„</span>
      <div>
        ë‹¨ì‹ ìŠ¹ë¥ : <b>${data.singleWinRate}%</b><br>
        ë³µì‹ ìŠ¹ë¥ : <b>${data.doubleWinRate}%</b><br><br>
        ${
          data.bestPartner
            ? `âœ… ê°€ì¥ ì˜ ë§ëŠ” íŒŒíŠ¸ë„ˆ: <b>${data.bestPartner}</b><br>`
            : ""
        }
        ${
          data.worstPartner
            ? `âš ï¸ ê°€ì¥ ì–´ë ¤ìš´ íŒŒíŠ¸ë„ˆ: <b>${data.worstPartner}</b><br>`
            : ""
        }
      </div>
    </div>

    <div class="block">
      <span class="tag">ì•½ì  ë¶„ì„</span>
      <div>${weakness}</div>
    </div>

    <div class="block">
      <span class="tag">í›ˆë ¨ ë°©í–¥ ì œì•ˆ</span>
      <div style="white-space:pre-line">${training}</div>
    </div>

    ${
      opponentTip
        ? `<div class="block"><span class="tag">ìƒëŒ€ ë¶„ì„</span>${opponentTip}</div>`
        : ""
    }
  `;
}

// âœ… í™”ë©´ ì¶œë ¥
document.getElementById("analysisContainer").innerHTML = analyzeStyle();
</script>

</body>
</html>
