<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>íƒêµ¬ ìŠ¤íƒ€ì¼ ë¶„ì„</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<h1 id="title">íƒêµ¬ ìŠ¤íƒ€ì¼ ë¶„ì„</h1>

<div id="content" style="
  white-space:pre-wrap;
  font-size:16px;
  line-height:1.7;
  padding:16px;
  background:#f8fafc;
  border-radius:12px;
"></div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
import { getDatabase, ref, get } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyArRznuWhfuiOA1vFtwlArMCLsAdTz6XHo",
  authDomain: "pingpongclub-4a5fd.firebaseapp.com",
  databaseURL: "https://pingpongclub-4a5fd-default-rtdb.firebaseio.com",
  projectId: "pingpongclub-4a5fd",
  storageBucket: "pingpongclub-4a5fd.firebasestorage.app",
  messagingSenderId: "802826774007",
  appId: "1:802826774007:web:ca4d05be778eeaf1723af2"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

// âœ… URL íŒŒë¼ë¯¸í„°ë¡œ ì„ ìˆ˜ ì´ë¦„ ê°€ì ¸ì˜¤ê¸°
const params = new URLSearchParams(location.search);
const playerName = params.get("name");

// âœ… í˜ì´ì§€ ì œëª© ë³€ê²½
document.getElementById("title").textContent = `ğŸ“ ${playerName} â€“ ìŠ¤íƒ€ì¼ ë¶„ì„`;

// âœ… ì „ì²´ ë¶„ì„ ë°ì´í„°ë¥¼ Firebaseì—ì„œ ë¶ˆëŸ¬ì˜¤ê¸°
const snap = await get(ref(db, "analysisAll"));

if (!snap.exists()) {
  document.getElementById("content").textContent = "âš  ë¶„ì„ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.";
} else {
  const data = snap.val();

  // âœ… ì´ ì„ ìˆ˜ ë°ì´í„°ë§Œ ì¶œë ¥
  const text = data[playerName] ?? "ì´ ì„ ìˆ˜ì˜ ë¶„ì„ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.";
  document.getElementById("content").textContent = text;
}
</script>

</body>
</html>
